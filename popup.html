<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Block Popup</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="popup-container">
    <header>
      <h1>Block Popup</h1>
      <div class="version">v2.0</div>
    </header>

    <div class="site-info">
      <div class="site-name" id="currentSite">–¢–µ–∫—É—â–∏–π —Å–∞–π—Ç</div>
    </div>

    <div class="settings-section">
      <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–∞–π—Ç–∞</h2>
      
      <div class="setting-item">
        <label for="siteEnabled">–í–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ø–∞–ø–æ–≤</label>
        <label class="toggle-switch" for="siteEnabled">
          <input type="checkbox" id="siteEnabled">
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div id="rulesSection" style="display: none;">
        <div class="rules-list" id="rulesList">
          <!-- –ü—Ä–∞–≤–∏–ª–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        
        <div class="add-rule-section">
          <h3>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</h3>
          
          <div class="auto-detect-section">
            <button id="detectPopups" class="detect-button">üéØ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ø–∞–ø—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</button>
            <div id="detectStatus" class="detect-status" style="display: none;">
              <span id="detectStatusText">–ü–æ–∏—Å–∫ –ø–æ–ø–∞–ø–æ–≤...</span>
              <button id="stopDetect" class="stop-detect-button">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            </div>
          </div>
          
          <div class="manual-rule-section">
            <h4>–ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:</h4>
            <div class="rule-form">
              <div class="rule-description">
                <input type="text" id="ruleDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
              </div>
              
              <div id="conditionsContainer">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —É—Å–ª–æ–≤–∏—è -->
                <div class="condition-item" data-index="0">
                  <div class="condition-header">
                    <span class="condition-title">–£—Å–ª–æ–≤–∏–µ 1</span>
                    <button type="button" class="remove-condition-btn" title="–£–¥–∞–ª–∏—Ç—å —É—Å–ª–æ–≤–∏–µ" style="display: none;">√ó</button>
                  </div>
                  <div class="condition-content">
                    <select class="condition-type">
                      <option value="content">–¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç</option>
                      <option value="phrase">–°–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ</option>
                      <option value="outerHTML">HTML —Å–æ–¥–µ—Ä–∂–∏—Ç</option>
                      <option value="class">–ö–ª–∞—Å—Å</option>
                      <option value="id">ID</option>
                      <option value="selector">–°–µ–ª–µ–∫—Ç–æ—Ä</option>
                      <option value="isPopup">–Ø–≤–ª—è–µ—Ç—Å—è –ø–æ–ø–∞–ø–æ–º</option>
                      <option value="isLink">–Ø–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π</option>
                      <option value="hasPopupParent">–†–æ–¥–∏—Ç–µ–ª—å-–ø–æ–ø–∞–ø</option>
                      <option value="hasPopupChild">–ü–æ—Ç–æ–º–æ–∫-–ø–æ–ø–∞–ø</option>
                    </select>
                    <div class="condition-value-container">
                      <input type="text" class="condition-pattern" placeholder="–í–≤–µ–¥–∏—Ç–µ —à–∞–±–ª–æ–Ω">
                      <div class="condition-depth-container" style="display: none;">
                        <label>–£—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="number" class="condition-depth" min="1" max="5" value="2">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="add-condition-container">
                <button type="button" id="addCondition" class="secondary-button">+ –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ</button>
              </div>
              
              <div class="rule-buttons">
                <button id="addRule" class="primary-button">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</button>
                <button id="cancelEdit" class="secondary-button" style="display: none;">–û—Ç–º–µ–Ω–∞</button>
              </div>
            </div>
            
            <div class="rule-help">
              <p><strong>–¢–∏–ø—ã —É—Å–ª–æ–≤–∏–π:</strong></p>
              <ul>
                <li><strong>–¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:</strong> –≠–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</li>
                <li><strong>–°–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ:</strong> –≠–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω–æ–µ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–µ</li>
                <li><strong>HTML —Å–æ–¥–µ—Ä–∂–∏—Ç:</strong> HTML-–∫–æ–¥ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</li>
                <li><strong>–ö–ª–∞—Å—Å:</strong> –≠–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π CSS –∫–ª–∞—Å—Å</li>
                <li><strong>ID:</strong> –≠–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π ID</li>
                <li><strong>–°–µ–ª–µ–∫—Ç–æ—Ä:</strong> –≠–ª–µ–º–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—É</li>
                <li><strong>–Ø–≤–ª—è–µ—Ç—Å—è –ø–æ–ø–∞–ø–æ–º:</strong> –≠–ª–µ–º–µ–Ω—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –ø–æ–ø–∞–ø</li>
                <li><strong>–Ø–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π:</strong> –≠–ª–µ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–æ–π (—Ç–µ–≥ a)</li>
                <li><strong>–†–æ–¥–∏—Ç–µ–ª—å-–ø–æ–ø–∞–ø:</strong> –≠–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è-–ø–æ–ø–∞–ø –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö</li>
                <li><strong>–ü–æ—Ç–æ–º–æ–∫-–ø–æ–ø–∞–ø:</strong> –≠–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç –ø–æ—Ç–æ–º–∫–∞-–ø–æ–ø–∞–ø –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤–Ω–∏–∑</li>
              </ul>
              <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–ª—è —É—Å–ª–æ–≤–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–æ–ø–∞–ø–∞–º–∏ (–Ø–≤–ª—è–µ—Ç—Å—è –ø–æ–ø–∞–ø–æ–º, –†–æ–¥–∏—Ç–µ–ª—å-–ø–æ–ø–∞–ø, –ü–æ—Ç–æ–º–æ–∫-–ø–æ–ø–∞–ø), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –•–û–¢–Ø –ë–´ –û–î–ù–û–ì–û –∏–∑ –Ω–∏—Ö. –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –í–°–ï–• —É—Å–ª–æ–≤–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="buttons-row">
        <button id="resetSiteSettings" class="secondary-button">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button id="saveSiteSettings" class="primary-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
    
    <div class="settings-section">
      <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞–º–∏</h2>
      
      <div class="site-management">
        <div class="site-status" id="siteStatus">
          <span id="statusText">–í–∫–ª—é—á–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∞–π—Ç–∞</span>
        </div>
        
        <div class="buttons-row">
          <button id="removeSite" class="secondary-button" style="display: none;">–£–¥–∞–ª–∏—Ç—å —Å–∞–π—Ç</button>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <div class="debug-section">
        <label for="debugMode" class="debug-label">
          <input type="checkbox" id="debugMode">
          <span>–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏</span>
        </label>
        <button id="reloadScripts" class="reload-button">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã</button>
      </div>
      <button id="openOptions" class="text-button">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
  </div>
  
  <div class="notification" id="notification">
    <span id="notificationText">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</span>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>
